<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Construction &amp; installation d&#8217;Apache :: Antora Use Case</title>
    <link rel="canonical" href="https://jacquelincharbonnel.github.io/antora_case/apache/2022/build/build.html">
    <meta name="generator" content="Antora 3.1.7">
    <link rel="stylesheet" href="../../../_/css/site.css">
<link rel="stylesheet" href="../../../_/css/extra.css">
<link rel="stylesheet" href="../../../_/css/lastmodify.css">

  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://jacquelincharbonnel.github.io/antora_case">Antora Use Case</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="apache" data-version="2022">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Le serveur Apache</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../start/start.html">Démarrage &amp; arrêt</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../http/http.html">Protocole HTTP</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../config/config.html">Configuration d&#8217;Apache</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="build.html">Apache from scratch</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Le serveur Apache</span>
    <span class="version">2022</span>
  </div>
  <ul class="components">
    <li class="component">
      <span class="title">Génie logiciel</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../genie_logiciel/2022/index.html">2022</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <span class="title">Le serveur Apache</span>
      <ul class="versions">
        <li class="version is-current">
          <a href="../index.html">2022</a>
        </li>
        <li class="version">
          <a href="../../2021/index.html">2021</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Making Of</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../makingof/Fr/index.html">Fr</a>
        </li>
        <li class="version">
          <a href="../../../makingof/En/index.html">En</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Master Data Science</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../master/index.html">default</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Programmation en C</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../C/2022/C/base.html">2022</a>
        </li>
        <li class="version">
          <a href="../../../C/2021/C/base.html">2021</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Python objet</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../python_objet/2022/index.html">2022</a>
        </li>
        <li class="version">
          <a href="../../../python_objet/2021/index.html">2021</a>
        </li>
        <li class="version">
          <a href="../../../python_objet/2020/index.html">2020</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../master/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Le serveur Apache</a></li>
    <li><a href="build.html">Apache from scratch</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">2022</button>
  <div class="version-menu">
    <a class="version is-current" href="build.html">2022</a>
    <a class="version" href="../../2021/build/build.html">2021</a>
  </div>
</div>
  <div class="edit-this-page"><a href="file:///home/jaclin/antora_components/antora_case/apache/starts/cur/modules/build/pages/build.adoc">Edit this Page</a></div>
</div>
<div class="lastmodify"> modifié le <span id="lastmodify"/> </div>
  <div class="content">
<article class="doc">
<h1 class="page">Construction &amp; installation d&#8217;Apache</h1>
<div class="sect1">
<h2 id="_construction"><a class="anchor" href="#_construction"></a>1. Construction</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_pourquoi_construire_apache"><a class="anchor" href="#_pourquoi_construire_apache"></a>1.1. Pourquoi construire Apache ?</h3>
<div class="paragraph">
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
</div>
</div>
<div class="sect2">
<h3 id="_récupération_des_sources"><a class="anchor" href="#_récupération_des_sources"></a>1.2. Récupération des sources</h3>
<div class="paragraph">
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
</div>
<div class="sidebarblock exercice">
<div class="content">
<div class="title">Exercice 1</div>
<div class="paragraph">
<p>Récupérer l&#8217;archive des sources de la dernière version stable (sur <a href="http://httpd.apache.org" class="bare">http://httpd.apache.org</a>), la dépaqueter, lire le fichier <code>README</code> (il contient la suite des opérations).</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Indications :  <code>gunzip</code>, <code>tar</code>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_choix_du_répertoire_de_déploiement"><a class="anchor" href="#_choix_du_répertoire_de_déploiement"></a>1.3. Choix du répertoire de déploiement</h3>
<div class="paragraph">
<p>Il existe communément deux stratégies de déploiement des logiciels.</p>
</div>
<div class="paragraph">
<p>La première consiste à le déployer sous <code>/</code>.
Les fichiers sont donc installés sur tout le filesystem, c&#8217;est-à-dire dans <code>/etc</code>, <code>/usr/sbin</code>, <code>/usr/bin</code>, <code>/var</code>, etc.
Cette opération nécessite des droits particuliers, et n&#8217;est pas sans danger, puisqu&#8217;elle peut écraser des fichiers systèmes.
Les logiciels fournis par la distribution sont installés suivant cette stratégie.
Vous ne l&#8217;utiliserez pas, pour éviter tout conflit avec elle.</p>
</div>
<div class="paragraph">
<p>La seconde consiste à tout déployer sous un répertoire donné (nommé par la suite <em>instdir</em>).
Cette stratégie évite tout conflit avec l&#8217;existant.
Vous utiliserez cette stratégie, en suivant la convention communément répandue consistant à prendre pour répertoire <em>instdir</em> <code>/usr/local/nom_du_logiciel/version</code>, où <em>version</em> est le numéro de version du logiciel.</p>
</div>
<div class="sidebarblock exercice">
<div class="content">
<div class="title">Exercice 2</div>
<div class="paragraph">
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_vérification_des_pré_requis_et_génération_du_makefile"><a class="anchor" href="#_vérification_des_pré_requis_et_génération_du_makefile"></a>1.4. Vérification des pré-requis et génération du Makefile</h3>
<div class="paragraph">
<p>La première étape consiste à récolter des informations sur la machine (logiciels et bibliothèques présents)
pour vérifier que les pré-requis sont vérifiés.
C&#8217;est le rôle du script <code>configure</code> présent dans l&#8217;archive.
Les informations récoltées vont servir à générer un <code>Makefile</code> personnalisé.</p>
</div>
<div class="sidebarblock exercice">
<div class="content">
<div class="title">Exercice 3</div>
<div class="paragraph">
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_compilation"><a class="anchor" href="#_compilation"></a>1.5. Compilation</h3>
<div class="sidebarblock exercice">
<div class="content">
<div class="title">Exercice 4</div>
<div class="paragraph">
<p>Sous l&#8217;identité d&#8217;un utilisateur sans privilège particulier, compiler le logiciel en exécutant la commande <code>make</code>.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installation"><a class="anchor" href="#_installation"></a>2. Installation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>La commande <code>make install</code> installe le logiciel dans le répertoire qui a été spécifié via l&#8217;option <code>--prefix</code> à l&#8217;appel précédent de <code>./configure</code>.</p>
</div>
<div class="sidebarblock exercice">
<div class="content">
<div class="title">Exercice 5</div>
<div class="paragraph">
<p>Lancer l&#8217;installation.
Explorer <em>instdir</em>, et repérer les binaires et le fichier de configuration principal d&#8217;Apache.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
Attention : cette opération est irréversible et peut détériorer le système (par exemple si <code>prefix</code> a été mal positionné, et si l&#8217;opération est réalisée par <code>root</code>) !
C&#8217;est pourquoi mieux vaut la réaliser sous l&#8217;identité d&#8217;un utilisateur sans privilège, après avoir créer <em>instdir</em> et positionné correctement son propriétaire.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
l&#8217;option <code>-n</code> de <code>make</code> lui demande d&#8217;indiquer ce qu&#8217;il compte faire, sans le faire.
Cette option est intéressante lors du déploiement, pour s&#8217;assurer que les fichiers n&#8217;iront pas s&#8217;installer n&#8217;importe où.
Il suffit pour cela de lancer <code>make -n install</code>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p>L&#8217;installation étant faite, les sources ne sont plus utiles et pourraient très bien être supprimées.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuration"><a class="anchor" href="#_configuration"></a>3. Configuration</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_serverroot_documentroot_listen"><a class="anchor" href="#_serverroot_documentroot_listen"></a>3.1. <code>ServerRoot</code>, <code>DocumentRoot</code>, <code>Listen</code></h3>
<div class="paragraph">
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
</div>
<div class="sidebarblock exercice">
<div class="content">
<div class="title">Exercice 6</div>
<div class="paragraph">
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>ServerRoot</code> doit normalement avoir pour valeur <em>instdir</em>.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_user_et_group"><a class="anchor" href="#_user_et_group"></a>3.2. User et Group</h3>
<div class="paragraph">
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
</div>
<div class="sidebarblock exercice">
<div class="content">
<div class="title">Exercice 7</div>
<div class="paragraph">
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_exécution"><a class="anchor" href="#_exécution"></a>4. Exécution</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Un seul serveur au plus peut écouter sur un port donné.
Par conséquent, pour exécuter simultanément le serveur apache de la distribution et celui construit, il est nécessaire de différencier les ports d&#8217;écoute.</p>
</div>
<div class="sidebarblock exercice">
<div class="content">
<div class="title">Exercice 8</div>
<div class="paragraph">
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
</div>
</div>
</div>
<div class="sidebarblock exercice">
<div class="content">
<div class="title">Exercice 9</div>
<div class="paragraph">
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Indications : <code>ps</code>, <code>netstat</code>, <code>lsof</code>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_test_mise_en_ligne_de_la_documentation"><a class="anchor" href="#_test_mise_en_ligne_de_la_documentation"></a>4.1. Test : mise en ligne de la documentation</h3>
<div class="paragraph">
<p>La documentation du serveur apache a été installée avec le reste.</p>
</div>
<div class="sidebarblock exercice">
<div class="content">
<div class="title">Exercice 10</div>
<div class="paragraph">
<p>Créer un virtual host destiné à consulter cette documentation.</p>
</div>
</div>
</div>
<div class="sidebarblock exercice">
<div class="content">
<div class="title">Exercice 11</div>
<div class="paragraph">
<p>Créer un autre virtual host pour publier la documentation présente sur le serveur
(par exemple dans <code>/usr/share/doc</code>).</p>
</div>
</div>
</div>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <p class="center">
  <a href="https://jacquelincharbonnel.github.io/home/index.html">Jacquelin Charbonnel</a>
  <!-- &nbsp; &mdash; &nbsp; -->
  &nbsp; &nbsp;
  &copy; Creative Commons BY-NC-SA 4.0
  </p>
</footer>

<script>
var myDate = new Date(document.lastModified);
myNewDate = new Intl.DateTimeFormat(
            undefined,
            {year: "numeric", month: "long", day: "numeric", hour: "2-digit", minute: "2-digit"}
        )
        .format(myDate).replace(/\./g, '-');
document.getElementById("lastmodify").innerHTML = myNewDate ;
</script>

<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
